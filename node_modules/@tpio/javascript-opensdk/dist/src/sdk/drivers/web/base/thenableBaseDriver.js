"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createDriver = void 0;
const THENABLE_DRIVERS = new Map();
function createDriver(ctor, ...args) {
    let thenableWebDriverProxy = THENABLE_DRIVERS.get(ctor);
    if (!thenableWebDriverProxy) {
        thenableWebDriverProxy = class extends ctor {
            constructor(session, ...rest) {
                super(session, ...rest);
                const pd = this.getSession().then((session) => new ctor(session, ...rest));
                this.then = pd.then.bind(pd);
                this.catch = pd.catch.bind(pd);
            }
        };
        THENABLE_DRIVERS.set(ctor, thenableWebDriverProxy);
    }
    return thenableWebDriverProxy.createSession(...args);
}
exports.createDriver = createDriver;
